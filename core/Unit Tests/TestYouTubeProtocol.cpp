//
//  TestYouTubeProtocol.cpp
//  G-Ear Player
//
//  Created by Zsolt Szatm√°ri on 9/14/13.
//
//

#include "tut/tut.hpp"

#include "YouTubeProtocol.h"

using namespace Gear;

namespace tut
{
    struct testwebcookie
    {
        //       struct keepee{ int data; };
    };
    
    typedef test_group<string> testgroup;
    typedef testgroup::object testobject;
    static testgroup shared_ptr_testgroup("YouTubeProtocol");
    
    static const char testHtml[] = "fmt_list=35%2F854x480%2F9%2F0%2F115%2C43%2F640x360%2F99%2F0%2F0%2C34%2F640x360%2F9%2F0%2F115%2C18%2F640x360%2F9%2F0%2F115%2C5%2F320x240%2F7%2F0%2F0%2C36%2F320x240%2F99%2F1%2F0%2C17%2F176x144%2F99%2F1%2F0&token=vjVQa1PpcFOTjo0WOkU5GJyyxUIhilVleNxS4Mlo4tU%3D&title=FRONT+LINE+ASSEMBLY+-+KILLING+GROUNDS+%5BOFFICIAL%5D&endscreen_module=http%3A%2F%2Fs.ytimg.com%2Fyts%2Fswfbin%2Fendscreen-vflHipqli.swf&account_playback_token=PiOfuu2jxw-5A3ONshqxTDkbvlN8MTM3OTI1MDI5MEAxMzc5MTYzODkw&no_get_video_log=1&idpj=-7&avg_rating=4.88248587571&storyboard_spec=http%3A%2F%2Fi1.ytimg.com%2Fsb%2FXc9POla-hIg%2Fstoryboard3_L%24L%2F%24N.jpg%7C48%2327%23100%2310%2310%230%23default%235VIrmCJACovD6oFDvwHl4BayQiE%7C80%2345%2373%2310%2310%235000%23M%24M%23WNrbPwbP0QjFsPSeJbHB0mbvshI%7C160%2390%2373%235%235%235000%23M%24M%2348K1Dn5TkCpdiFDB7-SgkYuXTfg&ldpj=-21&adaptive_fmts=bitrate%3D944648%26size%3D854x480%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fdur%253D358.658%2526itag%253D135%2526factor%253D1.25%2526lmt%253D1370877636952097%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526expire%253D1379188998%2526upn%253D7TVH67zu2oo%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Cclen%25252Ccp%25252Cdur%25252Cfactor%25252Cgir%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Clmt%25252Csource%25252Cupn%25252Cexpire%2526key%253Dyt1%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526clen%253D33038501%2526gir%253Dyes%2526ms%253Dau%2526mv%253Dm%2526mt%253D1379163822%2526burst%253D40%2526source%253Dyoutube%2526signature%253D8D7EE03F43FF6F99A1A4DC2A15C91A2245C78153.6CF7CFCA72CEF31B646E1BA7854A49712BEE5E02%2526ip%253D91.83.235.119%26init%3D0-707%26type%3Dvideo%252Fmp4%253B%2Bcodecs%253D%2522avc1.4d401f%2522%26index%3D708-1603%26itag%3D135%2Cbitrate%3D483099%26size%3D640x360%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fdur%253D358.658%2526itag%253D134%2526factor%253D1.25%2526lmt%253D1370877612766657%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526expire%253D1379188998%2526upn%253D7TVH67zu2oo%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Cclen%25252Ccp%25252Cdur%25252Cfactor%25252Cgir%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Clmt%25252Csource%25252Cupn%25252Cexpire%2526key%253Dyt1%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526clen%253D14752751%2526gir%253Dyes%2526ms%253Dau%2526mv%253Dm%2526mt%253D1379163822%2526burst%253D40%2526source%253Dyoutube%2526signature%253D5DAF101C6A19A69681241FB4BA517F5827F602A7.6FA20E3A871E075F1D51C8DD30761D381560A0C4%2526ip%253D91.83.235.119%26init%3D0-707%26type%3Dvideo%252Fmp4%253B%2Bcodecs%253D%2522avc1.4d401e%2522%26index%3D708-1603%26itag%3D134%2Cbitrate%3D280294%26size%3D426x240%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fdur%253D358.658%2526itag%253D133%2526factor%253D1.25%2526lmt%253D1370877620950782%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526expire%253D1379188998%2526upn%253D7TVH67zu2oo%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Cclen%25252Ccp%25252Cdur%25252Cfactor%25252Cgir%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Clmt%25252Csource%25252Cupn%25252Cexpire%2526key%253Dyt1%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526clen%253D12160917%2526gir%253Dyes%2526ms%253Dau%2526mv%253Dm%2526mt%253D1379163822%2526burst%253D40%2526source%253Dyoutube%2526signature%253DC03C4417672E4460F9084702A1586747D57D738A.CD7F6B1C28622137F980AAAF5E6FD7223B7DE986%2526ip%253D91.83.235.119%26init%3D0-671%26type%3Dvideo%252Fmp4%253B%2Bcodecs%253D%2522avc1.4d4015%2522%26index%3D672-1567%26itag%3D133%2Cbitrate%3D101936%26size%3D256x144%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fdur%253D358.658%2526itag%253D160%2526factor%253D1.25%2526lmt%253D1370877611268765%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526expire%253D1379188998%2526upn%253D7TVH67zu2oo%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Cclen%25252Ccp%25252Cdur%25252Cfactor%25252Cgir%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Clmt%25252Csource%25252Cupn%25252Cexpire%2526key%253Dyt1%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526clen%253D4468674%2526gir%253Dyes%2526ms%253Dau%2526mv%253Dm%2526mt%253D1379163822%2526burst%253D40%2526source%253Dyoutube%2526signature%253D3CC560BD518917CA66CC5292F57CB8E70C2237E0.A1DECCF8D692D4D8514ECF1C00779966A06C96C9%2526ip%253D91.83.235.119%26init%3D0-670%26type%3Dvideo%252Fmp4%253B%2Bcodecs%253D%2522avc1.42c00b%2522%26index%3D671-1566%26itag%3D160%2Cbitrate%3D48748%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fdur%253D358.934%2526itag%253D139%2526factor%253D1.25%2526lmt%253D1370877613626070%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526expire%253D1379188998%2526upn%253D7TVH67zu2oo%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Cclen%25252Ccp%25252Cdur%25252Cfactor%25252Cgir%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Clmt%25252Csource%25252Cupn%25252Cexpire%2526key%253Dyt1%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526clen%253D2135074%2526gir%253Dyes%2526ms%253Dau%2526mv%253Dm%2526mt%253D1379163822%2526burst%253D40%2526source%253Dyoutube%2526signature%253D0BB0A8591DD29506A96F005064653540C29995B7.4EB9E28ACA38BC4C2210DA7FDEED3D2C9850FA50%2526ip%253D91.83.235.119%26init%3D0-592%26type%3Daudio%252Fmp4%253B%2Bcodecs%253D%2522mp4a.40.5%2522%26index%3D593-1056%26itag%3D139%2Cbitrate%3D128526%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fdur%253D358.841%2526itag%253D140%2526factor%253D1.25%2526lmt%253D1370877611269306%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526expire%253D1379188998%2526upn%253D7TVH67zu2oo%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Cclen%25252Ccp%25252Cdur%25252Cfactor%25252Cgir%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Clmt%25252Csource%25252Cupn%25252Cexpire%2526key%253Dyt1%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526clen%253D5699752%2526gir%253Dyes%2526ms%253Dau%2526mv%253Dm%2526mt%253D1379163822%2526burst%253D40%2526source%253Dyoutube%2526signature%253DBB8340C5A16748BF3404E6592F89B11028BCCBCE.6C6BE3976A0653451C55F17C9B72D634CF7F6BCF%2526ip%253D91.83.235.119%26init%3D0-591%26type%3Daudio%252Fmp4%253B%2Bcodecs%253D%2522mp4a.40.2%2522%26index%3D592-1055%26itag%3D140%2Cbitrate%3D256329%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fdur%253D358.841%2526itag%253D141%2526factor%253D1.25%2526lmt%253D1370877612773073%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526expire%253D1379188998%2526upn%253D7TVH67zu2oo%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Cclen%25252Ccp%25252Cdur%25252Cfactor%25252Cgir%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Clmt%25252Csource%25252Cupn%25252Cexpire%2526key%253Dyt1%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526clen%253D11441211%2526gir%253Dyes%2526ms%253Dau%2526mv%253Dm%2526mt%253D1379163822%2526burst%253D40%2526source%253Dyoutube%2526signature%253DC33FBC191AE5C59930238F9C493F6726CADB2B41.3CB9B70DE0C21C537C107A11D774C0F5B63DFA5D%2526ip%253D91.83.235.119%26init%3D0-591%26type%3Daudio%252Fmp4%253B%2Bcodecs%253D%2522mp4a.40.2%2522%26index%3D592-1055%26itag%3D141&sendtmp=1&track_embed=1&tmi=1&iurlsd=http%3A%2F%2Fi1.ytimg.com%2Fvi%2FXc9POla-hIg%2Fsddefault.jpg&url_encoded_fmt_stream_map=sig%3DB5E373CDFA51E13A2202B1C86A11FAA1B10DD674.37F11269152117A2AD6C344C3443B0AF3DA0D2BB%26quality%3Dlarge%26fallback_host%3Dtc.v8.cache6.c.youtube.com%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fmt%253D1379163822%2526mv%253Dm%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526factor%253D1.25%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526ms%253Dau%2526expire%253D1379188998%2526upn%253DaGP7YIlYgoM%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Ccp%25252Cfactor%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Csource%25252Cupn%25252Cexpire%2526burst%253D40%2526ip%253D91.83.235.119%2526key%253Dyt1%2526itag%253D35%2526source%253Dyoutube%26type%3Dvideo%252Fx-flv%26itag%3D35%2Csig%3D6592771579AE89BD79357BC2E4FE5B1DC47E9A12.5FBFC1DA682FCA7893337AC01B583F9283466D2C%26quality%3Dmedium%26fallback_host%3Dtc.v4.cache6.c.youtube.com%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fmv%253Dm%2526upn%253DaGP7YIlYgoM%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526mt%253D1379163822%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526ms%253Dau%2526expire%253D1379188998%2526ratebypass%253Dyes%2526ipbits%253D8%2526sparams%253Dcp%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Cratebypass%25252Csource%25252Cupn%25252Cexpire%2526source%253Dyoutube%2526key%253Dyt1%2526itag%253D43%2526ip%253D91.83.235.119%26type%3Dvideo%252Fwebm%253B%2Bcodecs%253D%2522vp8.0%252C%2Bvorbis%2522%26itag%3D43%2Csig%3D205600E8531F54178E0C6067004054982BC346F8.5C597FE57E7D8BDABD72A7BFD7A43648E0C89F25%26quality%3Dmedium%26fallback_host%3Dtc.v20.cache8.c.youtube.com%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fmt%253D1379163822%2526mv%253Dm%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526factor%253D1.25%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526ms%253Dau%2526expire%253D1379188998%2526upn%253DaGP7YIlYgoM%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Ccp%25252Cfactor%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Csource%25252Cupn%25252Cexpire%2526burst%253D40%2526ip%253D91.83.235.119%2526key%253Dyt1%2526itag%253D34%2526source%253Dyoutube%26type%3Dvideo%252Fx-flv%26itag%3D34%2Csig%3DC5C3CD10D30ED2F5AA404F9FA26D2E8E5D4F876F.A0D01257F45332EE5713264CB95140981E9DE2C2%26quality%3Dmedium%26fallback_host%3Dtc.v17.cache6.c.youtube.com%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fmv%253Dm%2526upn%253DaGP7YIlYgoM%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526mt%253D1379163822%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526ms%253Dau%2526expire%253D1379188998%2526ratebypass%253Dyes%2526ipbits%253D8%2526sparams%253Dcp%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Cratebypass%25252Csource%25252Cupn%25252Cexpire%2526source%253Dyoutube%2526key%253Dyt1%2526itag%253D18%2526ip%253D91.83.235.119%26type%3Dvideo%252Fmp4%253B%2Bcodecs%253D%2522avc1.42001E%252C%2Bmp4a.40.2%2522%26itag%3D18%2Csig%3D0207CC34A5DDA6652AE2AD53C2FB4DFA5D11A199.C92FF7327AE54C9E6DC9AB37F728A6FE50319394%26quality%3Dsmall%26fallback_host%3Dtc.v12.cache7.c.youtube.com%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fmt%253D1379163822%2526mv%253Dm%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526factor%253D1.25%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526ms%253Dau%2526expire%253D1379188998%2526upn%253DaGP7YIlYgoM%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Ccp%25252Cfactor%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Csource%25252Cupn%25252Cexpire%2526burst%253D40%2526ip%253D91.83.235.119%2526key%253Dyt1%2526itag%253D5%2526source%253Dyoutube%26type%3Dvideo%252Fx-flv%26itag%3D5%2Csig%3D42BECFFB7DF57B6AAC6BA4E6793880ED8CF106A0.5C0BA62FBE36D1658EADA030BE0BB7189DCA7F0A%26quality%3Dsmall%26fallback_host%3Dtc.v3.cache1.c.youtube.com%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fmt%253D1379163822%2526mv%253Dm%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526factor%253D1.25%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526ms%253Dau%2526expire%253D1379188998%2526upn%253DaGP7YIlYgoM%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Ccp%25252Cfactor%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Csource%25252Cupn%25252Cexpire%2526burst%253D40%2526ip%253D91.83.235.119%2526key%253Dyt1%2526itag%253D36%2526source%253Dyoutube%26type%3Dvideo%252F3gpp%253B%2Bcodecs%253D%2522mp4v.20.3%252C%2Bmp4a.40.2%2522%26itag%3D36%2Csig%3DA5134C1853A147353AAA96E9DD42A86CD036F73E.32A4CB0ACEF41B2A9AB38FF11A3DC5B8DB4436B5%26quality%3Dsmall%26fallback_host%3Dtc.v17.cache7.c.youtube.com%26url%3Dhttp%253A%252F%252Fr4---sn-po8puxa-c0qe.c.youtube.com%252Fvideoplayback%253Fmt%253D1379163822%2526mv%253Dm%2526fexp%253D927833%25252C924606%25252C929117%25252C929121%25252C929906%25252C929907%25252C929922%25252C929127%25252C929129%25252C929131%25252C929930%25252C936403%25252C925726%25252C936310%25252C925720%25252C925722%25252C925718%25252C925714%25252C929917%25252C906945%25252C929933%25252C920302%25252C906842%25252C913428%25252C919811%25252C935020%25252C935021%25252C913563%25252C919373%25252C930803%25252C908536%25252C938701%25252C931924%25252C934005%25252C936308%25252C909549%25252C935006%25252C901608%25252C900816%25252C912711%25252C934507%25252C907231%25252C936312%25252C906001%2526algorithm%253Dthrottle-factor%2526id%253D5dcf4f3a56be8488%2526sver%253D3%2526factor%253D1.25%2526cp%253DU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2526ms%253Dau%2526expire%253D1379188998%2526upn%253DaGP7YIlYgoM%2526ipbits%253D8%2526sparams%253Dalgorithm%25252Cburst%25252Ccp%25252Cfactor%25252Cid%25252Cip%25252Cipbits%25252Citag%25252Csource%25252Cupn%25252Cexpire%2526burst%253D40%2526ip%253D91.83.235.119%2526key%253Dyt1%2526itag%253D17%2526source%253Dyoutube%26type%3Dvideo%252F3gpp%253B%2Bcodecs%253D%2522mp4v.20.3%252C%2Bmp4a.40.2%2522%26itag%3D17&abd=1&timestamp=1379163890&c=WEB&pltype=contentugc&plid=AATmV53BnTPR79yK&loudness=-19.1189956665&author=MetropolisRecords&thumbnail_url=http%3A%2F%2Fi1.ytimg.com%2Fvi%2FXc9POla-hIg%2Fdefault.jpg&video_verticals=%5B1022%2C+35%2C+590%5D&muted=0&allow_ratings=1&video_id=Xc9POla-hIg&has_cc=False&keywords=Metropolis+Records%2CIndustrial%2Calternative%2CBill+Leeb%2CFront+Line+Assembly%2CKILLING+GROUNDS&fexp=927833%2C924606%2C929117%2C929121%2C929906%2C929907%2C929922%2C929127%2C929129%2C929131%2C929930%2C936403%2C925726%2C936310%2C925720%2C925722%2C925718%2C925714%2C929917%2C906945%2C929933%2C920302%2C906842%2C913428%2C919811%2C935020%2C935021%2C913563%2C919373%2C930803%2C908536%2C938701%2C931924%2C934005%2C936308%2C909549%2C935006%2C901608%2C900816%2C912711%2C934507%2C907231%2C936312%2C906001&length_seconds=359&view_count=67170&dash=1&vq=auto&hl=hu_HU&watermark=%2Chttp%3A%2F%2Fs.ytimg.com%2Fyts%2Fimg%2Fwatermark%2Fyoutube_watermark-vflHX6b6E.png%2Chttp%3A%2F%2Fs.ytimg.com%2Fyts%2Fimg%2Fwatermark%2Fyoutube_hd_watermark-vflAzLcD6.png&iurl=http%3A%2F%2Fi1.ytimg.com%2Fvi%2FXc9POla-hIg%2Fhqdefault.jpg&ftoken=DodAJm6jlZRmjOI968TbM048vN58MTM3OTI1MDI5MEAxMzc5MTYzODkw&ptk=youtube_multi&use_cipher_signature=False&status=ok&allow_embed=1&dashmpd=http%3A%2F%2Fwww.youtube.com%2Fapi%2Fmanifest%2Fdash%2Fas%2Ffmp4_audio_clear%252Cwebm_audio_clear%252Cfmp4_sd_hd_clear%252Cwebm_sd_hd_clear%2Fid%2F5dcf4f3a56be8488%2Fsver%2F3%2Fsignature%2F5AB8C10427449AC101965491BB2B66A5E6A37648.D5EBDA46ED57DF8DC0ACE84A45FB9EE6F45A9B5D%2Ffexp%2F927833%252C924606%252C929117%252C929121%252C929906%252C929907%252C929922%252C929127%252C929129%252C929131%252C929930%252C936403%252C925726%252C936310%252C925720%252C925722%252C925718%252C925714%252C929917%252C906945%252C929933%252C920302%252C906842%252C913428%252C919811%252C935020%252C935021%252C913563%252C919373%252C930803%252C908536%252C938701%252C931924%252C934005%252C936308%252C909549%252C935006%252C901608%252C900816%252C912711%252C934507%252C907231%252C936312%252C906001%2Fexpire%2F1379188998%2Fupn%2FfE3F3WCjVAo%2Fipbits%2F8%2Fsparams%2Fas%252Ccp%252Cid%252Cip%252Cipbits%252Csource%252Cexpire%2Fsource%2Fyoutube%2Fkey%2Fyt1%2Fcp%2FU0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr%2Fip%2F91.83.235.119&eventid=8l40UprWA4OO8gOI4YD4AQ&share_icons=http%3A%2F%2Fs.ytimg.com%2Fyts%2Fswfbin%2Fsharing-vflF4t";
    
    template<>
    template<>
    void testobject::test<1>()
    {
        string url = YouTubeProtocol::videoUrl(testHtml);
        
        ensure("something", !url.empty());
        ensure("goodresult", url == "http://r4---sn-po8puxa-c0qe.c.youtube.com/videoplayback?mt=1379163822&mv=m&fexp=927833%2C924606%2C929117%2C929121%2C929906%2C929907%2C929922%2C929127%2C929129%2C929131%2C929930%2C936403%2C925726%2C936310%2C925720%2C925722%2C925718%2C925714%2C929917%2C906945%2C929933%2C920302%2C906842%2C913428%2C919811%2C935020%2C935021%2C913563%2C919373%2C930803%2C908536%2C938701%2C931924%2C934005%2C936308%2C909549%2C935006%2C901608%2C900816%2C912711%2C934507%2C907231%2C936312%2C906001&algorithm=throttle-factor&id=5dcf4f3a56be8488&sver=3&factor=1.25&cp=U0hWTlFTVl9OUkNONl9JTVpKOjg2OXB6bkprRFlr&ms=au&expire=1379188998&upn=aGP7YIlYgoM&ipbits=8&sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cid%2Cip%2Cipbits%2Citag%2Csource%2Cupn%2Cexpire&burst=40&ip=91.83.235.119&key=yt1&itag=35&source=youtube&signature=B5E373CDFA51E13A2202B1C86A11FAA1B10DD674.37F11269152117A2AD6C344C3443B0AF3DA0D2BB");
    }
}
